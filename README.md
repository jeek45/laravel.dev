тестовое задание

<b>Задание "Стена сообщений"</b>

<i>Главная страница</i>
Содержит список всех сообщений. Сортировка - снизу-вверх (последние добавленное сообщение - сверху). У каждого сообщения, помимо текста, указано имя (username) автора и время добавления.

Если пользователь авторизован, ему становится доступна форма отправки сообщения.

Сообщение не может быть пустым (или состоять только из пробелов). При попытке отправки такого сообщения - пользователю выдается предупреждение “Сообщение не может быть пустым”.

После успешной отправки, сообщение пользователя сразу появляется на “стене”.

Добавление, правку и удаление своих сообщений, реализовать на ajax (если не используется веб-сокет)

<i>Авторизация и Регистрация</i>

Если решение без использования OAuth, то регистрация происходит на усмотрение программиста. Пароль не может быть пустым. Главное правило: валидность и исключение коллизий.

Блок справа показывается только авторизованному пользователю. Содержит Имя пользователя и ссылку “Выход”, нажав на которую пользователь выходит из под своей учетной записи.

Роли пользователей

Сделать RBAC на основе битовой маски. UI делать не обязательно, но будет плюсом (достаточно код и нужные значения в базе).

Роли:

· Админ (добавлять/изменять/удалять все сообщения)

· Пользователь (добавлять/изменять/удалять свои сообщения)

<b>Реализация<b>

Обкатывалаось на Openserver

vendor включил из-за изменений, понимаю что красиво, но залипать начал уже.

git clone https://github.com/jeek45/laravel.dev.git

composer update && bower update

php artisan key:generate

php artisan migrate:refresh --seed

настройки в .env

Сиды создадут трех юзеров admin:admin user:123456 demo:demo, сообщения, и таблицу с маской

RBAC реализовал через middleware (rolepremission) и одну таблицу 'premission', которая подхватывает поле is_admin юзера P.s в задание не было указано, что для каждого пользователя свои настройки. Поэтому разграничение только на Админы и Пользователи. Так бы пришлось вязать по user_id

Ajax реализован для 'update' и 'delete'. Для создания оставил form.post.

Поигрался с иконками( подтягиваются 8 иконок, и берется отстаток от деления user_id - выступающий именем изображения)